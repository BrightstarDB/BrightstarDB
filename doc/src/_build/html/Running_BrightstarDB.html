<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>BrightstarDB Configuration Options &mdash; BrightstarDB 1.3pre1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3pre1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="BrightstarDB 1.3pre1 documentation" href="index.html" />
    <link rel="next" title="SPARQL Endpoint" href="SPARQL_Endpoint.html" />
    <link rel="prev" title="Developing With BrightstarDB" href="Developing_With_BrightstarDB2.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="SPARQL_Endpoint.html" title="SPARQL Endpoint"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Developing_With_BrightstarDB2.html" title="Developing With BrightstarDB"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">BrightstarDB 1.3pre1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="brightstardb-configuration-options">
<span id="running-brightstardb"></span><h1>BrightstarDB Configuration Options<a class="headerlink" href="#brightstardb-configuration-options" title="Permalink to this headline">¶</a></h1>
<p>BrightstarDB can be used as an embedded database or accessed as a WCF service. In either case there are certain global configuration options that can be set in the application&#8217;s config file.</p>
<div class="section" id="configuring-an-embedded-database">
<h2>Configuring an Embedded Database<a class="headerlink" href="#configuring-an-embedded-database" title="Permalink to this headline">¶</a></h2>
<p>There is no additional configuration required to create and use an embedded database. See the section on Getting Started or the Entity Framework for examples of creating and using an embedded database. However if you wish to override some of the default settings you can do so by adding an &lt;appSettings&gt; section to the applications&#8217;s .config file (if one does not already exist) and then adding one or more of the configuration options details below.</p>
</div>
<div class="section" id="configuring-the-brightstardb-windows-service">
<h2>Configuring the BrightstarDB Windows Service<a class="headerlink" href="#configuring-the-brightstardb-windows-service" title="Permalink to this headline">¶</a></h2>
<p>The installer will create a windows service called &#8220;BrightstarDB&#8221;. This exposes a WCF service endpoint that can be used to access the database. The configuration for this service can be found in BrightstarService.exe.config in the &nbsp;[INSTALLDIR]Service folder.</p>
</div>
<div class="section" id="running-the-brightstardb-service-as-an-application">
<h2>Running the BrightstarDB Service as an Application<a class="headerlink" href="#running-the-brightstardb-service-as-an-application" title="Permalink to this headline">¶</a></h2>
<p>Running the service as an application rather than a Windows service can be done by running the BrightstarService.exe located in the [INSTALLDIR]Service folder. The configuration from the .config file is used by the service when it starts up. However, some properties can also be overridden using command line parameters passed to the service. Note that either no parameters are passed or all four parameters are required.</p>
<div class="highlight-python"><pre>BrightstarService.exe [&lt;base location&gt; &lt;http port&gt; &lt;tcp port&gt; &lt;pipe name&gt;]



- &lt;base location&gt; specifies the path to the directory where the BrightstarDB stores are located. This overrides the BrightstarDB.StoreLocation configuration option.

- &lt;http port&gt; specifies the port that the HTTP interface to the BrightstarDB service will use to listen for connections. This overrides the BrightstarDB.HttpPort configuration option.

- &lt;tcp port&gt; specifies the port that the TCP interface to the BrightstarDB service will use to listen for connections. This overrides the BrightstarDB.TcpPort configuration option.

- &lt;pipe name&gt; specifies the name of the named pipe that the named pipe interface to the BrightstarDB service will use to listen for connections. This overrides the BrightstarDB.NetNamedPipeName configuration option.</pre>
</div>
</div>
<div class="section" id="id1">
<h2>BrightstarDB Configuration Options<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The following list describes all the available configuration options for BrightstarDB.</p>
<blockquote>
<div><ul class="simple">
<li>BrightstarDB.StoreLocation - specifies the path to the directory where stores are persisted. For Windows Phone 7.1 this path is fixed as the directory &#8220;brightstar&#8221; in the isolated storage for the application, so this setting has no effect.</li>
<li>BrightstarDB.LogLevel - configures the level of detail that is logged by the BrightstarDB application. The valid options are ERROR, INFO, WARN, DEBUG, and ALL. &nbsp;For more information about logging and configuring where logs are written please refer to the section <a class="reference internal" href="#logging"><em>Logging</em></a>. For Windows Phone 7.1 this setting is fixed as ERROR and cannot be overridden.</li>
<li>BrightstarDB.TxnFlushTripleCount - specifies a batch size for importing large sets of triples. At the end of each batch BrightstarDB will perform housekeeping tasks to try to ensure a lower memory footprint. The default value is 10,000 on .NET 4.0. For applications that run on larger, more capable hardware (with available memory of 4GB or more) the value can usually be increased to 50,000 or even 100,000 - but it is worth testing the configured value before committing to it in deployment. For Windows Phone 7.1 this value is fixed as 1,000 and cannot be overridden.</li>
<li>BrightstarDB.ConnectionString - specifies the default connection string to use when creating a BrightstarDB client. This setting can be used by applications that want to enable the user to choose the store that they connect to as a runtime configuration option.</li>
<li>BrightstarDB.PageCacheSize - specifies the amount of memory in MB to be used by the BrightstarDB store page cache. This setting applies only to applications that open a BrightstarDB store as the cache is used to cache pages of data from the data.bs and resources.bs data files. The default value is 2048 on .NET 4.0 and 4 on Windows Phone 7.1. Note that this memory is not all allocated on startup so actual memory usage by the application may initially be lower than this value.</li>
<li>BrightstarDB.EnableQueryCache - specifies whether or not the application should cache the results of SPARQL queries. Allowed values are &#8220;true&#8221; or &#8220;false&#8221; and the setting defaults to &#8220;true&#8221;. Query caching is only available on .NET 4.0 so this setting has no effect on Windows Phone 7.1</li>
<li>BrightstarDB.QueryCacheDirectory - specifies the folder location where cached results are stored.</li>
<li>BrightstarDB.QueryCacheMemory - specifies the amount of memory in MB to be used by the SPARQL query cache. The default value is 256.</li>
<li>BrightstarDB.QueryCacheDisk - specifies the amount of disk space (in MB) to be used by the SPARQL query cache. The default value is 2048. The disk space used will be in a subdirectory under the location specified by the BrightstarDB.StoreLocation configuration property.</li>
<li>BrightstarDB.HttpPort - specifies the port number used by the BrightstarDB WCF service to listen for incoming HTTP requests. The default value is 8090.</li>
<li>BrightstarDB.TcpPort - specifies the port number used by the BrightstarDB WCF service to listen for incoming TCP requests. The default value is 8095.</li>
<li>BrightstarDB.NetNamedPipeName - specifies the name of the pipe used by the BrighstarDB WCF service to listen for incoming named pipe requests. The default value is &#8220;brightstar&#8221;.</li>
<li>BrightstarDB.PersistenceType - specifies the default type of persistence used for the main BrighstarDB index files. Allowed values are &#8220;appendonly&#8221; or &#8220;rewrite&#8221; (values are case-insensitive). For more information about the store persistence types please refer to the section <a class="reference internal" href="Developing_With_BrightstarDB2.html#store-persistence-types"><em>Store Persistence Types</em></a>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example-configuration">
<h2>Example Configuration<a class="headerlink" href="#example-configuration" title="Permalink to this headline">¶</a></h2>
<p>The sample below shows all the BrightstarDB options with usage comments.</p>
<div class="highlight-python"><pre>&lt;?xml version="1.0"?&gt;
&lt;configuration&gt;
  &lt;appSettings&gt;
    &lt;!-- The folder where stores are persisted, this is set by the installer but can be changed later. --&gt;
    &lt;add key="BrightstarDB.StoreLocation" value="C:\Program Files (x86)\BrightstarDB\Data" /&gt;


    &lt;!-- The logging level for the server. --&gt;
    &lt;add key="BrightstarDB.LogLevel" value="ALL" /&gt;


    &lt;!-- Indicates the number of triples in a transaction to process before doing a partial commit.
         Larger numbers require more machine memory but result in faster transaction processing. --&gt;
    &lt;add key="BrightstarDB.TxnFlushTripleCount" value="100000" /&gt;


    &lt;!-- For client applications this property value is used to connect to a store. See the section below for more detail on connection strings --&gt;
    &lt;add key="BrightstarDB.ConnectionString" value="Type=embedded;StoresDirectory=c:\brightstar;StoreName=test" /&gt;


    &lt;!-- Specifies the maximum amount of memory (in MB) to use for page caching. --&gt;
    &lt;add key="BrightstarDB.PageCacheSize" value="2048" /&gt;


    &lt;!-- Enable (true) or disable (false) the caching of SPARQL query results --&gt;
    &lt;add key-"BrightstarDB.EnableQueryCache" value="true" /&gt;

    &lt;!-- The amount of memory to use for the SPARQL query cache --&gt;
    &lt;add key="BrightstarDB.QueryCacheMemory" value="512" /&gt;


    &lt;!-- The amount of disk space (in MB) to use for the SPARQL query cache. This only applies to server / embedded applications --&gt;
    &lt;add key="BrightstarDB.QueryCacheDisk" value="2048" /&gt;


    &lt;!-- Set the http port that the brightstar service runs on. default value is 8090. --&gt;
    &lt;add key="BrightstarDB.HttpPort" value="8090" /&gt;


    &lt;!-- Set the tcp port that the brightstar service runs on. default value is 8095. --&gt;
    &lt;add key="BrightstarDB.TcpPort" value="8095" /&gt;


    &lt;!-- Set the tcp port that the brightstar service runs on. default value is brightstar. --&gt;
    &lt;add key="BrightstarDB.NetNamedPipeName" value="brightstar" /&gt;


    &lt;!-- The default store index persistence type --&gt;
    &lt;add key="BrightstarDB.PersistenceType" value="AppendOnly" /&gt;
  &lt;/appSettings&gt;
&lt;/configuration&gt;</pre>
</div>
</div>
<div class="section" id="caching">
<span id="id2"></span><h2>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<p>BrightstarDB provides facilities for caching the results of SPARQL queries both in memory and to disk. Caching complex SPARQL queries or queries that potentially return large numbers of results can provide a significant performance improvement. Caching is controlled through a combination of settings in the application configuration file (the web.config for web apps, or the .exe.config for other executables).</p>
<p><strong>AppSetting Key</strong>  <strong>Default Value</strong>  <strong>Description</strong>
BrightstarDB.EnableQueryCache  false  Boolean value (&#8220;true&#8221; or &#8220;false&#8221;) that specifies if the system should cache the result of SPARQL queries.
BrightstarDB.QueryCacheMemory  256  The size in MB of the in-memory query cache.
BrightstarDB.QueryCacheDirectory  &lt;undefined&gt;  The path to the directory to be used for the disk cache. If left undefined, then the behaviour depends on whether the BrightstarDB.StoreLocation setting is provided. If it is, then a disk cache will be created in the _bscache subdirectory of the StoreLocation, otherwise disk caching will be disabled.
BrightstarDB.QueryCacheDiskSpace  2048  The size in MB of the disk cache.</p>
<div class="section" id="example-configurations">
<h3>Example Configurations<a class="headerlink" href="#example-configurations" title="Permalink to this headline">¶</a></h3>
<p>To cache in the _bscache subdirectory of a fixed store location (a good choice for server applications), it is necessary only to enable caching and ensure that the store location is specified in the configuration file:</p>
<div class="highlight-python"><pre>&lt;configuration&gt;
  &lt;appSettings&gt;
    &lt;add key="BrightstarDB.EnableQueryCache" value="true" /&gt;
    &lt;!-- disk cache will be written to the directory d:\brightstar\_bscache --&gt;
    &lt;add key="BrightstarDB.StoreLocation" value="d:\brightstar\" /&gt;
  &lt;/appSettings&gt;
&lt;/configuration&gt;</pre>
</div>
<p>To cache in some other location (e.g. a fast disk dedicated to caching):</p>
<div class="highlight-python"><pre>&lt;configuration&gt;
  &lt;appSettings&gt;
    &lt;add key="BrightstarDB.EnableQueryCache" value="true" /&gt;
    &lt;add key="BrightstarDB.StoreLocation" value="d:\brightstar\" /&gt;


    &lt;!-- Cache on a different disk from the B* stores to maximize disk throughput.
         Disk cache will be written to the directory e:\bscache --&gt;
    &lt;add key="BrightstarDB.QueryCacheDirectory" value="e:\bscache\"/&gt;


    &lt;!-- Allow disk cache to grow to up to 200GB in size --&gt;
    &lt;add key="BrightstarDB.QueryCacheDiskSpace" value="204800" /&gt;
  &lt;/appSettings&gt;
&lt;/configuration&gt;</pre>
</div>
<p>This sample has no disk cache because there is no valid location for the cache to be created:</p>
<div class="highlight-python"><pre>&lt;configuration&gt;
  &lt;appSettings&gt;
    &lt;add key="BrightstarDB.EnableQueryCache" value="true" /&gt;
    &lt;!-- 1GB in-memory cache --&gt;
    &lt;add key="BrightstarDB.QueryCacheMemory" value=1024"/&gt;


    &lt;!-- This property is not used because there is no
          BrightstarDB.QueryCacheDirectory or
          BrightstarDB.StoreLocation setting defined. --&gt;
    &lt;add key="BrightstarDB.QueryCacheDiskSpace" value="204800" /&gt;


  &lt;/appSettings&gt;
&lt;/configuration&gt;</pre>
</div>
</div>
</div>
<div class="section" id="logging">
<span id="id3"></span><h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>BrightstarDB uses the .NET diagnostics infrastructure for logging. This provides a good deal of runtime flexibility over what messages are logged and how/where they are logged. All logging performed by BrightstarDB is written to a <a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.aspx">TraceSource</a> named &#8220;BrightstarDB&#8221;.</p>
<p>The default configuration for this trace source depends on whether or not the BrightstarDB.StoreLocation configuration setting is provided in the application configuration file. If this setting is provided then the BrightstarDB trace source will be automatically configured to write to a log.txt file contained in the directory specified as the store location. By default the trace source is set to log Information level messages and above.</p>
<p>Other logging options can be configured by entries in the &lt;system.diagnostics&gt; section of the application configuration file.</p>
<p>To log all messages (including debug messages), you can modify the TraceSource&#8217;s switchLevel as follows:</p>
<div class="highlight-python"><pre>&lt;system.diagnostics&gt;
  &lt;sources&gt;
    &lt;source name="BrightstarDB" switchValue="Verbose"/&gt;
  &lt;/sources&gt;
&lt;/system.diagnostics&gt;</pre>
</div>
<p>Equally you can use other switchValue settings to reduce the amount of logging performed by BrightstarDB.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">BrightstarDB Configuration Options</a><ul>
<li><a class="reference internal" href="#configuring-an-embedded-database">Configuring an Embedded Database</a></li>
<li><a class="reference internal" href="#configuring-the-brightstardb-windows-service">Configuring the BrightstarDB Windows Service</a></li>
<li><a class="reference internal" href="#running-the-brightstardb-service-as-an-application">Running the BrightstarDB Service as an Application</a></li>
<li><a class="reference internal" href="#id1">BrightstarDB Configuration Options</a></li>
<li><a class="reference internal" href="#example-configuration">Example Configuration</a></li>
<li><a class="reference internal" href="#caching">Caching</a><ul>
<li><a class="reference internal" href="#example-configurations">Example Configurations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Developing_With_BrightstarDB2.html"
                        title="previous chapter">Developing With BrightstarDB</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="SPARQL_Endpoint.html"
                        title="next chapter">SPARQL Endpoint</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Running_BrightstarDB.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="SPARQL_Endpoint.html" title="SPARQL Endpoint"
             >next</a> |</li>
        <li class="right" >
          <a href="Developing_With_BrightstarDB2.html" title="Developing With BrightstarDB"
             >previous</a> |</li>
        <li><a href="index.html">BrightstarDB 1.3pre1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Kal Ahmed, Graham Moore.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>